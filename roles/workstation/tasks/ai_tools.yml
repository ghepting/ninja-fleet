- name: ai_tools | Install Claude Code CLI
  ansible.builtin.shell:
    cmd: set -o pipefail && curl -fsSL https://claude.ai/install.sh | zsh
    executable: /bin/zsh
    creates: "~/.local/bin/claude"
  when: not ansible_check_mode
  tags: [ai, claude]

- name: ai_tools | Install Gemini CLI
  ansible.builtin.shell:
    cmd: |
      source ~/.nvm/nvm.sh
      if ! npm list -g @google/gemini-cli >/dev/null 2>&1; then
        npm install -g @google/gemini-cli
      else
        echo "ALREADY_INSTALLED"
      fi
    executable: /bin/zsh
  register: workstation_gemini_install
  changed_when: "'ALREADY_INSTALLED' not in workstation_gemini_install.stdout"
  when: not ansible_check_mode
  tags: [ai, gemini]
