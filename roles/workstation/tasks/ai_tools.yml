- name: ai_tools | Install Gemini CLI
  ansible.builtin.shell:
    cmd: |
      source ~/.nvm/nvm.sh
      if ! npm list -g @google/gemini-cli >/dev/null 2>&1; then
        npm install -g @google/gemini-cli
      else
        echo "ALREADY_INSTALLED"
      fi
    executable: /bin/zsh
  register: workstation_gemini_install
  changed_when: "'ALREADY_INSTALLED' not in workstation_gemini_install.stdout"
  when: not ansible_check_mode
  tags: [ai, gemini]

- name: ai_tools | Install OpenClaw.ai
  ansible.builtin.shell:
    cmd: |
      if ! command -v openclaw &> /dev/null; then
        set -o pipefail && curl -fsSL https://openclaw.ai/install.sh | bash
      else
        echo "ALREADY_INSTALLED"
      fi
    executable: /bin/zsh
  register: workstation_openclaw_install
  changed_when: "'ALREADY_INSTALLED' not in workstation_openclaw_install.stdout"
  when: not ansible_check_mode
  tags: [ai, openclaw]
